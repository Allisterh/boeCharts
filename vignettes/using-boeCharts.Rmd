---
title: "Using boeCharts"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using boeCharts}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, comment = "#>", cache = FALSE,
  fig.width = 7, fig.height = 4, dev = 'svg', fig.dpi = 96
)

```

The `boeCharts` package provides tools and helpers to help craft and productionise "Bank-ready" charts, primarily be augmenting [ggplot2](https://ggplot2.tidyverse.org/) graphics. These includes full chart themes for publications, recognised colour palettes, and helpful 'last-mile' utilities (detailed in ['Last-mile' formatting](last-mile-formatting.html)) for common, smaller tasks like formatting date labels.

## Bank colour palettes

Incorporate Bank palettes into your charts, like those found in [Bank standards on corporate identity](https://bankofengland.frontify.com/d/RPk6pMZziBFw/bank-standards#/brand-elements/colour-palette). 

Check out the options available by calling `boe_palettes`.

```{r}
# load package
library(boeCharts)

head(boe_palettes, 5)
```

You can preview colours in a supported palette using `boe_pal`:

```{r}
boe_pal(palette = "boe", n = 4)
```

The easiest way to use a palette in a chart is to use `scale_[colour|fill]_boe` as part of a standard `ggplot2` workflow (i.e. use in the same way you would use `scale` functions out-of-the-box in `ggplot2`):

```{r boe_pal}
# load package
library(ggplot2)

# make a base plot
p <- ggplot(data = FANG, aes(x = date, y = close, colour = symbol)) +
  geom_line() +
  labs(title = "BoE palette & theme test",
       subtitle = "A plot for demonstration purposes",
       y = "Closing\nprice", x = NULL) +
  theme_minimal()

# apply boe palette
p +
  scale_colour_discrete_boe(palette = "boe")

```

#### Business area / publication-ready palettes

Use colour schemes for your own business area or publications. For example, use colours seen in [historic Money & Credit statistical releases](https://www.bankofengland.co.uk/-/media/boe/files/statistics/money-and-credit/2017/october-2017.pdf?la=en&hash=F91456AC176039665F053EEE634CC2DB6D2DA506) with the "mcg" palette.

```{r mcg_pal}

p +
  # apply mcg palette
  scale_colour_discrete_boe(palette = "mcg")

```

## Chart themes

Go beyond palettes, and control the appearance of all (non-data) chart elements with **themes** to produce Bank-style plots.

### Inflation Report

A theme that approximates the design of charts in [the Inflation Report](https://www.bankofengland.co.uk/inflation-report/2018/august-2018/the-labour-market-and-pay). Note the arguments passed to `scale_y_continuous()` to achieve the correct y-axis format (as well as `scale_colour_discrete_boe`, seen earlier, to do the colours).

```{r ir_theme}

p +
  # apply boe palette
  scale_colour_discrete_boe(palette = "boe") +
  # add MCG theme
  theme_inflation_report() +
  # axis settings
  scale_y_continuous(position = "right", expand = c(0, 0), 
                     limits = c(0, 1250), breaks = seq(0, 1250, 250))
```

### DSD Publications

### Money & Credit

A theme that approximates the design of charts in [Money & Credit statistical releases](https://www.bankofengland.co.uk/statistics/money-and-credit/2018/may-2018) is found in `theme_mcg_pub()`.

```{r mcg_theme}

p +
  # apply boe palette
  scale_colour_discrete_boe(palette = "boe") +
  # add MCG theme
  theme_mcg_pub() +
  # axis settings
  scale_y_continuous(position = "right", expand = c(0, 0), 
                     limits = c(0, 1250), breaks = seq(0, 1250, 250)) +
  scale_x_date(expand = c(0, 0), labels = boe_date_labels(),
               breaks = seq(min(FANG$date), max(FANG$date), by = "3 months"))
```
