---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>", 
                      fig.path = "figures/", dpi = 105, fig.width = 6, fig.asp = 0.618)
```

# boeCharts

## Overview

`boeCharts` is an R package containing Bank chart styles and themes, in-line with [Bank standards on corporate identity](https://bankofengland.frontify.com/d/RPk6pMZziBFw/bank-standards), recommended (and designed) for use in conjunction with [ggplot2](https://ggplot2.tidyverse.org/). It currently houses designs for approximating charts found within a number of flagship publications:

- [Bank Overground](https://www.bankofengland.co.uk/bank-overground)
- [Inflation Report](https://www.bankofengland.co.uk/inflation-report/2018/august-2018/global-economic-and-financial-market-developments)
- [Statistical Releases](https://www.bankofengland.co.uk/statistics/money-and-credit/2019/april-2019)

## Install

`boeCharts` is an R package/library best used via R Studio (installed from the [software catalogue](http://sccm-wl-mgt-01/CMApplicationCatalog)).

Get the latest stable version of `boeCharts` by running the below code within an R session:

```{r install, eval=FALSE}
# install remotes package (required for local package installs)
if (!require("remotes")) install.packages("remotes")

# install boeCharts
install.packages("http://collaborate/workspaces/RHelpCentre/R%20documents/Packages/boeCharts_1.0.0.zip", repos = NULL, type = "binary")

# install any missing dependencies from CRAN
remotes::install_deps(find.package("boeCharts"))
```

## Use

`boeCharts` provides native support for use with [ggplot2](https://ggplot2.tidyverse.org/) (a popular R graphics library). You can use `scale_[colour|fill]_boe` functions for adopting Bank colour palettes within charts generated by `ggplot2`, and `theme_xxx` functions for applying full chart styles supported by `boeCharts`.

### A minimal example

```{r}
# load packages
library(boeCharts)
library(ggplot2)

# create chart
ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +
  geom_jitter(size = 3) +
  # Bank Overground theme
  theme_overground() +
  # a "vibrant" Bank colour combination
  scale_colour_boe(palette = "vibrantC")
```


```{r, example}
# load packages
library(boeCharts)
library(ggplot2)

# create chart
ggplot(data = FANG, aes(x = date, y = close, colour = symbol)) +
  geom_line(size = 0.7) +
  labs(title = "BoE Palette Test",
       subtitle = "A plot for demonstration purposes",
       y = "Closing\nprice", x = NULL) +
  # apply boe colour palette
  scale_colour_boe() +
  # apply an MCG publication theme
  theme_mcg_pub(axis_text_size = 11) +
  # apply custom axis settings
  scale_y_continuous(expand = c(0, 0), breaks = seq(0, 1250, 250), 
                     limits = c(0, 1250), position = "right") +
  scale_x_date(expand = c(0, 0), labels = boe_date_labels(),
               breaks = seq(min(FANG$date), max(FANG$date), by = "3 months"))
  
```

For more detailed guidance, refer to the package [vignettes](https://tfsapp-liv/tfs/UnmanagedCollection/Shared%20Analytical%20Code/_git/boeCharts?path=%2Fvignettes&version=GBmaster&_a=contents) (also included in the `boeCharts` documentation, accessible from within R once the package is installed).

## Contribute

This is an ongoing project to abstract and consolidate Bank charting guidelines, and any/all contributions are encouraged. Inspecting the source code in this repository will help with understanding how to make a custom palette, or building a chart theme for your business area. The following resources are also helpful (and inspired much of this effort):

- [Modify components of a theme](https://ggplot2.tidyverse.org/reference/theme.html)
- [govstyle](https://github.com/ukgovdatascience/govstyle)
- [hrbrthemes](https://github.com/hrbrmstr/hrbrthemes)
- [Building a new theme](https://bookdown.org/rdpeng/RProgDA/building-a-new-theme.html)

Also, for general consideration when contributing to the package, try to:

- Observe principles in Hadley Wickham's [R Packages book](https://r-pkgs.org/)
- Follow the Git branch (see [here](https://blog.rstudio.com/2017/09/13/rstudio-v1.1-the-little-things/) for how to create a branch from within R Studio) & [pull request](https://docs.microsoft.com/en-us/azure/devops/repos/git/pullrequest?view=azure-devops) model, or [contact Ewen](mailto:ewen.henderson@bankofengland.co.uk)
